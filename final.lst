MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ; FINAL PROJECT - ECE 151
                      00002 ; MARK BRYK AND KELVIN LIN
                      00003 
Warning[215]: Processor superseded by command line.  Verify processor symbol.
                      00004         LIST    P=PIC16F877A9
                      00005         include <p16F877A.inc>
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F877A processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00566         LIST
2007   3F72           00006         __CONFIG _HS_OSC & _WDT_OFF & _PWRTE_ON & _CP_OFF & _LVP_OFF
                      00007 
  00000000            00008 CASE0   EQU     0x00
  00000010            00009 CASE1   EQU     0x10
  00000020            00010 CASE2   EQU     0x20
  00000030            00011 CASE3   EQU     0x30
  00000040            00012 CASE4   EQU     0x40
  00000050            00013 CASE5   EQU     0x50
  00000060            00014 CASE6   EQU     0x60
  00000070            00015 CASE7   EQU     0x70
  00000080            00016 CASE8   EQU     0x80
  00000090            00017 CASE9   EQU     0x90
  000000A0            00018 CASE10  EQU     0xA0
  000000B0            00019 CASE11  EQU     0xB0
  000000C0            00020 CASE12  EQU     0xC0
  000000D0            00021 CASE13  EQU     0xD0
  000000E0            00022 CASE14  EQU     0xE0
                      00023 
Warning[205]: Found directive in column 1. (CBLOCK)
                      00024 CBLOCK  0x20
  00000020            00025 INS1
  00000021            00026 INS2
  00000022            00027 MYSTATUS
  00000023            00028 PC
  00000024            00029 DATAWRITE
  00000025            00030 OFFSET
  00000026            00031 OFFTMP
  00000027            00032 DATATMP
  00000028            00033 BB
  00000029            00034 TOS
Warning[205]: Found directive in column 1. (ENDC)
                      00035 ENDC
                      00036 
                      00037         ORG 0x00
0000   2???           00038         goto    start
                      00039         
                      00040 
                      00041         ORG 0x10
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0010                  00042 start
0010   1683           00043         bsf     STATUS, RP0     ; Bank 1
0011   3007           00044         movlw   0x07 
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0012   009F           00045         movwf   ADCON1 ; Set all lower bits of ADCON Special Reg to allow I/O from PORTE
0013   30FF           00046         movlw   0xFF
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0014   0085           00047         movwf   TRISA   ;       PORTA = 6 bits- Inputs from ALU
0015   3000           00048         movlw   0x00    ; All bits output
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0016   0086           00049         movwf   TRISB   ;       PORTB = Outputs to ALU - INS2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0017   0087           00050         movwf   TRISC   ;       PORTC = First Half of Instruction       
0018   1283           00051         bcf     STATUS, RP0     ; Bank 0
                      00052         
0019   3000           00053         MOVLW 0x00 ; clear PC
001A   00A3           00054         MOVWF   PC      
001B   2???           00055         GOTO    LJMP
                      00056 
                      00057 
001C                  00058 LSTART
001C   0AA3           00059         INCF    PC, F
                      00060 
001D                  00061 LJMP    
001D   2???           00062         CALL    readins
                      00063         
001E   0820           00064         MOVF    INS1, W;
001F   39F0           00065         ANDLW   0xF0    ; Take first 4 bits of Ins1 = Mode
                      00066         
0020   3A00           00067         XORLW   CASE0   ; If W is Case0, this will make W 0;
0021   1903           00068         BTFSC   STATUS, Z
0022   2???           00069         GOTO    L0
0023   3A10           00070         XORLW   CASE1
0024   1903           00071         BTFSC   STATUS, Z
0025   2???           00072         GOTO    L1
0026   3A30           00073         XORLW   CASE1^CASE2
0027   1903           00074         BTFSC   STATUS, Z
0028   2???           00075         GOTO    L2
0029   3A10           00076         XORLW   CASE2^CASE3
002A   1903           00077         BTFSC   STATUS, Z
002B   2???           00078         GOTO    L3
002C   3A70           00079         XORLW   CASE3^CASE4
002D   1903           00080         BTFSC   STATUS, Z
002E   2???           00081         GOTO    L4
002F   3A10           00082         XORLW   CASE4^CASE5
0030   1903           00083         BTFSC   STATUS, Z
0031   2???           00084         GOTO    L5
0032   3A30           00085         XORLW   CASE5^CASE6
0033   1903           00086         BTFSC   STATUS, Z
0034   2???           00087         GOTO    L6
0035   3A10           00088         XORLW   CASE6^CASE7
0036   1903           00089         BTFSC   STATUS, Z
0037   2???           00090         GOTO    L7
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0038   3AF0           00091         XORLW   CASE7^CASE8
0039   1903           00092         BTFSC   STATUS, Z
003A   2???           00093         GOTO    L8
003B   3A10           00094         XORLW   CASE8^CASE9
003C   1903           00095         BTFSC   STATUS, Z
003D   2???           00096         GOTO    L9
003E   3A30           00097         XORLW   CASE9^CASE10
003F   1903           00098         BTFSC   STATUS, Z
0040   2???           00099         GOTO    L10
0041   3A10           00100         XORLW   CASE10^CASE11
0042   1903           00101         BTFSC   STATUS, Z
0043   2???           00102         GOTO    L11
0044   3A70           00103         XORLW   CASE11^CASE12
0045   1903           00104         BTFSC   STATUS, Z
0046   2???           00105         GOTO    L12
0047   3A10           00106         XORLW   CASE12^CASE13
0048   1903           00107         BTFSC   STATUS, Z
0049   2???           00108         GOTO    L13
004A   3A30           00109         XORLW   CASE13^CASE14
004B   1903           00110         BTFSC   STATUS, Z
004C   2???           00111         GOTO    L14
                      00112 
004D   0000           00113 L0      nop
004E   2???           00114         GOTO    LSTART
                      00115 
004F                  00116 L1      ; ADD
004F   0821           00117                         MOVF    INS2, W 
0050   39F0           00118                         ANDLW   0xF0
0051   00A5           00119                         MOVWF   OFFSET
Message[305]: Using default destination of 1 (file).
0052   0EA5           00120                         SWAPF   OFFSET
                      00121                         
0053   2???           00122                         CALL    readdata
0054   0086           00123                         MOVWF   PORTB
0055   0E86           00124                         SWAPF   PORTB, F
                      00125                 ; Grab C title,
0056   0821           00126                         MOVF    INS2, W
0057   390F           00127                         ANDLW   0x0F
0058   00A5           00128                         MOVWF   OFFSET
                      00129 
                      00130         ;Read C bucket and put in bottom of Port B (to ALU)
0059   2???           00131                         CALL    readdata
005A   0686           00132                         XORWF   PORTB, F        ; now port B is full with buckets
                      00133 
                      00134         ; Set 3 mode bits on port d and send to ALU
005B   3007           00135                 MOVLW   0x07     
005C   0087           00136                 MOVWF   PORTC
                      00137 
                      00138         ; Clear Z and C bits of MyStatus Register               
005D   30FC           00139                 MOVLW   0xFC          
005E   05A2           00140                 ANDWF   MYSTATUS, F
005F   1E85           00141                 BTFSS   PORTA, 5      ; Check Z and C ALU outputs in PortA
0060   1422           00142                 BSF             MYSTATUS, 0
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0061   1F05           00143                 BTFSS   PORTA, 6
0062   14A2           00144                 BSF             MYSTATUS, 1     
                      00145 
                      00146         ; Grab A title, send it to SRAM, while Port A is feeding in the result.
0063   0820           00147                         MOVF    INS1, W         
0064   390F           00148                         ANDLW   0x0F
0065   00A5           00149                         MOVWF   OFFSET
0066   0805           00150                         MOVF    PORTA, W
0067   00A4           00151                         MOVWF   DATAWRITE
0068   2???           00152                         CALL    writedata
                      00153 
0069   2???           00154         GOTO    LSTART
                      00155         
006A                  00156 L2      ; SUB
006A   0821           00157                         MOVF    INS2, W 
006B   39F0           00158                         ANDLW   0xF0
006C   00A5           00159                         MOVWF   OFFSET
Message[305]: Using default destination of 1 (file).
006D   0EA5           00160                         SWAPF   OFFSET
                      00161                         
006E   2???           00162                         CALL    readdata
006F   0086           00163                         MOVWF   PORTB
0070   0E86           00164                         SWAPF   PORTB, F
                      00165                 ; Grab C title,
0071   0821           00166                         MOVF    INS2, W
0072   390F           00167                         ANDLW   0x0F
0073   00A5           00168                         MOVWF   OFFSET
                      00169 
                      00170         ;Read C bucket and put in bottom of Port B (to ALU)
0074   2???           00171                         CALL    readdata
0075   0686           00172                         XORWF   PORTB, F        ; now port B is full with buckets
                      00173 
                      00174         ; Set 3 mode bits on port d and send to ALU
0076   3006           00175                 MOVLW   0x06     
0077   0087           00176                 MOVWF   PORTC
                      00177 
                      00178         ; Clear Z and C bits of MyStatus Register               
0078   30FC           00179                 MOVLW   0xFC          
0079   05A2           00180                 ANDWF   MYSTATUS, F
007A   1E85           00181                 BTFSS   PORTA, 5      ; Check Z and C ALU outputs in PortA
007B   1422           00182                 BSF             MYSTATUS, 0
007C   1F05           00183                 BTFSS   PORTA, 6
007D   14A2           00184                 BSF             MYSTATUS, 1     
                      00185 
007E   0820           00186                         MOVF    INS1, W         
007F   390F           00187                         ANDLW   0x0F
0080   00A5           00188                         MOVWF   OFFSET
0081   0805           00189                         MOVF    PORTA, W
0082   00A4           00190                         MOVWF   DATAWRITE
0083   2???           00191                         CALL    writedata
                      00192 
0084   2???           00193         GOTO    LSTART
                      00194 
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0085                  00195 L3      ; AND
0085   0821           00196                         MOVF    INS2, W 
0086   39F0           00197                         ANDLW   0xF0
0087   00A5           00198                         MOVWF   OFFSET
Message[305]: Using default destination of 1 (file).
0088   0EA5           00199                         SWAPF   OFFSET
                      00200                         
0089   2???           00201                         CALL    readdata
008A   0086           00202                         MOVWF   PORTB
008B   0E86           00203                         SWAPF   PORTB, F
                      00204                 ; Grab C title,
008C   0821           00205                         MOVF    INS2, W
008D   390F           00206                         ANDLW   0x0F
008E   00A5           00207                         MOVWF   OFFSET
                      00208 
                      00209         ;Read C bucket and put in bottom of Port B (to ALU)
008F   2???           00210                         CALL    readdata
0090   0686           00211                         XORWF   PORTB, F        ; now port B is full with buckets
                      00212 
                      00213         ; Set 3 mode bits on port d and send to ALU
0091   3000           00214                 MOVLW   0x00     
0092   0087           00215                 MOVWF   PORTC
                      00216 
                      00217         ; Clear Z and C bits of MyStatus Register               
0093   30FD           00218                 MOVLW   0xFD          
0094   05A2           00219                 ANDWF   MYSTATUS, F
0095   1F05           00220                 BTFSS   PORTA, 6
0096   14A2           00221                 BSF             MYSTATUS, 1     
                      00222 
0097   0820           00223                         MOVF    INS1, W         
0098   390F           00224                         ANDLW   0x0F
0099   00A5           00225                         MOVWF   OFFSET
009A   0805           00226                         MOVF    PORTA, W
009B   00A4           00227                         MOVWF   DATAWRITE
009C   2???           00228                         CALL    writedata
                      00229 
009D   2???           00230         GOTO    LSTART
                      00231 
009E                  00232 L4      ; OR
009E   0821           00233                         MOVF    INS2, W 
009F   39F0           00234                         ANDLW   0xF0
00A0   00A5           00235                         MOVWF   OFFSET
Message[305]: Using default destination of 1 (file).
00A1   0EA5           00236                         SWAPF   OFFSET
                      00237                         
00A2   2???           00238                         CALL    readdata
00A3   0086           00239                         MOVWF   PORTB
00A4   0E86           00240                         SWAPF   PORTB, F
                      00241                 ; Grab C title,
00A5   0821           00242                         MOVF    INS2, W
00A6   390F           00243                         ANDLW   0x0F
00A7   00A5           00244                         MOVWF   OFFSET
                      00245 
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00246         ;Read C bucket and put in bottom of Port B (to ALU)
00A8   2???           00247                         CALL    readdata
00A9   0686           00248                         XORWF   PORTB, F        ; now port B is full with buckets
                      00249 
                      00250         ; Set 3 mode bits on port d and send to ALU
00AA   3001           00251                 MOVLW   0x01     
00AB   0087           00252                 MOVWF   PORTC
                      00253 
                      00254         ; Clear Z and C bits of MyStatus Register               
00AC   30FD           00255                 MOVLW   0xFD          
00AD   05A2           00256                 ANDWF   MYSTATUS, F
00AE   1F05           00257                 BTFSS   PORTA, 6
00AF   14A2           00258                 BSF             MYSTATUS, 1     
                      00259 
00B0   0820           00260                         MOVF    INS1, W         
00B1   390F           00261                         ANDLW   0x0F
00B2   00A5           00262                         MOVWF   OFFSET
00B3   0805           00263                         MOVF    PORTA, W
00B4   00A4           00264                         MOVWF   DATAWRITE
00B5   2???           00265                         CALL    writedata
                      00266 
00B6   2???           00267         GOTO    LSTART
                      00268 
00B7                  00269 L5      ; XOR
00B7   0821           00270                         MOVF    INS2, W 
00B8   39F0           00271                         ANDLW   0xF0
00B9   00A5           00272                         MOVWF   OFFSET
Message[305]: Using default destination of 1 (file).
00BA   0EA5           00273                         SWAPF   OFFSET
                      00274                         
00BB   2???           00275                         CALL    readdata
00BC   0086           00276                         MOVWF   PORTB
00BD   0E86           00277                         SWAPF   PORTB, F
                      00278                 ; Grab C title,
00BE   0821           00279                         MOVF    INS2, W
00BF   390F           00280                         ANDLW   0x0F
00C0   00A5           00281                         MOVWF   OFFSET
                      00282 
                      00283         ;Read C bucket and put in bottom of Port B (to ALU)
00C1   2???           00284                         CALL    readdata
00C2   0686           00285                         XORWF   PORTB, F        ; now port B is full with buckets
                      00286 
                      00287         ; Set 3 mode bits on port d and send to ALU
00C3   3002           00288                 MOVLW   0x02     
00C4   0087           00289                 MOVWF   PORTC
                      00290 
                      00291         ; Clear Z and C bits of MyStatus Register               
00C5   30FD           00292                 MOVLW   0xFD          
00C6   05A2           00293                 ANDWF   MYSTATUS, F
00C7   1F05           00294                 BTFSS   PORTA, 6
00C8   14A2           00295                 BSF             MYSTATUS, 1     
                      00296 
00C9   0820           00297                         MOVF    INS1, W         
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00CA   390F           00298                         ANDLW   0x0F
00CB   00A5           00299                         MOVWF   OFFSET
00CC   0805           00300                         MOVF    PORTA, W
00CD   00A4           00301                         MOVWF   DATAWRITE
00CE   2???           00302                         CALL    writedata
                      00303 
00CF   2???           00304         GOTO    LSTART
                      00305 
00D0                  00306 L6      ;Shift Case
00D0   1BA1           00307                 BTFSC   INS2, 7 
00D1   2???           00308                 GOTO    L6R             ; Right Shift
                      00309 ; Left Shift    
                      00310         ; Grab "B" title
00D2   0821           00311                         MOVF    INS2, W
00D3   390F           00312                         ANDLW   0x0F
00D4   00A5           00313                         MOVWF   OFFSET
00D5   0EA5           00314                         SWAPF   OFFSET, F
00D6   2???           00315                         CALL    readdata        
00D7   0086           00316                         MOVWF   PORTB
00D8   0E86           00317                         SWAPF   PORTB, F
                      00318                         
00D9   3003           00319                         MOVLW   0x03
00DA   0088           00320                         MOVWF   PORTD
                      00321 
                      00322         ; Clear C bit of MyStatus Register
00DB   30FE           00323                 MOVLW   0xFE
00DC   05A2           00324                 ANDWF   MYSTATUS, F
00DD   1E85           00325                 BTFSS   PORTA, 5
00DE   1422           00326                 BSF             MYSTATUS, 0
                      00327         
                      00328         ; Grab A title, send it to SRAM, while Port A is feeding in the result.
00DF   0820           00329                         MOVF    INS1, W         
00E0   390F           00330                         ANDLW   0x0F
00E1   00A5           00331                         MOVWF   OFFSET
00E2   0805           00332                         MOVF    PORTA, W
00E3   00A4           00333                         MOVWF   DATAWRITE
00E4   2???           00334                         CALL    writedata
                      00335 
00E5   2???           00336         GOTO    LSTART
                      00337 
Warning[207]: Found label after column 1. (L6R)
00E6                  00338         L6R
                      00339         ; Grab "B" title, send it to SRAM
00E6   0821           00340                         MOVF    INS2, W
00E7   390F           00341                         ANDLW   0x0F
00E8   00A5           00342                         MOVWF   OFFSET
00E9   0EA5           00343                         SWAPF   OFFSET, F
00EA   2???           00344                         CALL    readdata        
00EB   0086           00345                         MOVWF   PORTB
00EC   0E86           00346                         SWAPF   PORTB, F
                      00347                         
00ED   3004           00348                         MOVLW   0x04
00EE   0088           00349                         MOVWF   PORTD
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00350         
00EF   3001           00351                         MOVLW   0x01
00F0   0089           00352                         MOVWF   PORTE
                      00353         ; Clear C bit of MyStatus Register
00F1   30FE           00354                 MOVLW   0xFE
00F2   05A2           00355                 ANDWF   MYSTATUS, F
00F3   1E85           00356                 BTFSS   PORTA, 5
00F4   1422           00357                 BSF             MYSTATUS, 0
                      00358         
                      00359         ; Grab A title, send it to SRAM, while Port A is feeding in the result.
00F5   0820           00360                         MOVF    INS1, W         
00F6   390F           00361                         ANDLW   0x0F
00F7   00A5           00362                         MOVWF   OFFSET
00F8   0805           00363                         MOVF    PORTA, W
00F9   00A4           00364                         MOVWF   DATAWRITE
00FA   2???           00365                         CALL    writedata
                      00366 
00FB   2???           00367         GOTO    LSTART
                      00368 
00FC                  00369 L7      ;Not Case
                      00370         ; Grab "B" title, send it to SRAM
00FC   0821           00371                         MOVF    INS2, W
00FD   390F           00372                         ANDLW   0x0F
00FE   00A5           00373                         MOVWF   OFFSET
                      00374         ;Read "B" bucket from SRAM and put in bottom of Port B (to ALU)
00FF   2???           00375                         CALL    readdata
0100   0086           00376                         MOVWF   PORTB
Message[305]: Using default destination of 1 (file).
0101   0E86           00377                         SWAPF   PORTB   
                      00378                         
0102   3005           00379                         MOVLW   0x05
0103   0088           00380                         MOVWF   PORTD
                      00381         
                      00382         ; Clear Z bit of MyStatus Register
0104   30FD           00383                 MOVLW   0xFD
0105   05A2           00384                 ANDWF   MYSTATUS, F
0106   1F05           00385                 BTFSS   PORTA, 6
0107   14A2           00386                 BSF             MYSTATUS, 1
                      00387         
0108   0820           00388                         MOVF    INS1, W         
0109   390F           00389                         ANDLW   0x0F
010A   00A5           00390                         MOVWF   OFFSET
010B   0805           00391                         MOVF    PORTA, W
010C   00A4           00392                         MOVWF   DATAWRITE
010D   2???           00393                         CALL    writedata
                      00394 
010E   2???           00395         GOTO    LSTART
                      00396 
010F                  00397 L8      ;Move Case
                      00398         ;Clear the Z bit
010F   30FD           00399         MOVLW   0xFD
0110   05A2           00400         ANDWF   MYSTATUS, F
0111   1BA1           00401         BTFSC   INS2, 7
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0112   2???           00402         GOTO    L8b ; This is move FF
                      00403         
0113   0821           00404                 MOVF INS2, W
0114   390F           00405                 ANDLW   0x0F
0115   00A4           00406                 MOVWF   DATAWRITE
                      00407         
                      00408         ; set the Z bit of MyStatus Register
0116   1D03           00409                 BTFSS   STATUS, Z
0117   14A2           00410                 BSF             MYSTATUS, 1
                      00411 
0118   0820           00412                 MOVF    INS1, W         
0119   390F           00413                 ANDLW   0x0F
011A   00A5           00414                 MOVWF   OFFSET
011B   2???           00415                 CALL    writedata
                      00416                         
011C   2???           00417         GOTO LSTART
                      00418 
011D                  00419 L8b     ;Move Case 1 - MOVE FF
011D   0821           00420                 MOVF    INS2, W
011E   390F           00421                 ANDLW   0x0F
011F   00A5           00422                 MOVWF   OFFSET
0120   2???           00423                 CALL    readdata
                      00424                 
0121   00A4           00425                 MOVWF   DATAWRITE
                      00426 
                      00427         ; set the Z bit of MyStatus Register
0122   1D03           00428                 BTFSS   STATUS, Z
0123   14A2           00429                 BSF             MYSTATUS, 1
                      00430 
0124   0820           00431                 MOVF    INS1, W         
0125   390F           00432                 ANDLW   0x0F
0126   00A5           00433                 MOVWF   OFFSET
0127   2???           00434                 CALL    writedata
                      00435 
0128   2???           00436         GOTO LSTART
                      00437 
0129                  00438 L9      ;LOD
                      00439         ;Clear the Z bit
0129   30FD           00440         MOVLW   0xFD
012A   05A2           00441         ANDWF   MYSTATUS, F
012B   1BA1           00442         BTFSC   INS2, 7
012C   2???           00443         GOTO    L9b     
                      00444         
                      00445         ;Given offset
012D   0821           00446         MOVF    INS2, W
012E   00A5           00447         MOVWF   OFFSET
012F   2???           00448         CALL    readdata
                      00449 
                      00450         ; set the Z bit of MyStatus Register
0130   1D03           00451         BTFSS   STATUS, Z
0131   14A2           00452         BSF             MYSTATUS, 1
                      00453 
0132   00A4           00454         MOVWF   DATAWRITE
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0133   0820           00455         MOVF    INS1, W
0134   390F           00456         ANDLW   0x0F
0135   00A5           00457         MOVWF   OFFSET
0136   2???           00458         CALL    writedata
0137   2???           00459         GOTO    LSTART
                      00460 
0138                  00461 L9b     ;Given Rb as offset
0138   0821           00462         MOVF    INS2, W
0139   390F           00463         ANDLW   0x0F
013A   00A5           00464         MOVWF   OFFSET
013B   2???           00465         CALL    readdata
013C   00A6           00466         MOVWF   OFFTMP
013D   0EA6           00467         SWAPF   OFFTMP, F
013E   0AA5           00468         INCF    OFFSET, F
013F   2???           00469         CALL    readdata
0140   0626           00470         XORWF   OFFTMP, W
0141   00A5           00471         MOVWF   OFFSET
0142   2???           00472         CALL    readdata
                      00473 
                      00474         ; set the Z bit of MyStatus Register
0143   1D03           00475         BTFSS   STATUS, Z
0144   14A2           00476         BSF             MYSTATUS, 1
                      00477 
0145   00A4           00478         MOVWF   DATAWRITE
0146   0820           00479         MOVF    INS1, W
0147   390F           00480         ANDLW   0x0F
0148   00A5           00481         MOVWF   OFFSET
0149   2???           00482         CALL    writedata
                      00483         
014A   2???           00484         GOTO LSTART
                      00485 
014B                  00486 L10     ;STO
                      00487         ;Clear the Z bit
014B   30FD           00488         MOVLW   0xFD
014C   05A2           00489         ANDWF   MYSTATUS, F
                      00490 
014D   1BA1           00491         BTFSC   INS2, 7
014E   2???           00492         GOTO    L10b ; This is from Rb
                      00493         
014F   0820           00494         MOVF    INS1, W
0150   390F           00495         ANDLW   0x0F
0151   00A5           00496         MOVWF   OFFSET
0152   2???           00497         CALL    readdata
0153   00A4           00498         MOVWF   DATAWRITE
                      00499         
                      00500         ; set the Z bit of MyStatus Register
0154   1D03           00501         BTFSS   STATUS, Z
0155   14A2           00502         BSF             MYSTATUS, 1
                      00503         
0156   0821           00504         MOVF    INS2, W
0157   00A5           00505         MOVWF   OFFSET
0158   2???           00506         CALL    writedata
                      00507 
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0159   2???           00508         GOTO    LSTART
                      00509         
015A                  00510 L10b
015A   0820           00511         MOVF    INS1, W
015B   390F           00512         ANDLW   0x0F
015C   00A5           00513         MOVWF   OFFSET
015D   2???           00514         CALL    readdata
015E   00A4           00515         MOVWF   DATAWRITE
                      00516 
                      00517         ; set the Z bit of MyStatus Register
015F   1D03           00518         BTFSS   STATUS, Z
0160   14A2           00519         BSF             MYSTATUS, 1
                      00520 
0161   0821           00521         MOVF    INS2, W
0162   390F           00522         ANDLW   0x0F
0163   00A5           00523         MOVWF   OFFSET
0164   2???           00524         CALL    readdata
0165   00A6           00525         MOVWF   OFFTMP
0166   0EA6           00526         SWAPF   OFFTMP, F
0167   0AA5           00527         INCF    OFFSET, F
0168   2???           00528         CALL    readdata
0169   0626           00529         XORWF   OFFTMP, W
016A   00A5           00530         MOVWF   OFFSET
016B   2???           00531         CALL    writedata
                      00532 
016C   2???           00533         GOTO    LSTART
                      00534 
016D                  00535 L11     ;TSC/TSS        
                      00536         ;Find out what bb is
016D   0821           00537         MOVF    INS2, W
016E   3903           00538         ANDLW   0x03
016F   00A8           00539         MOVWF   BB
                      00540 
0170   0820           00541         MOVF    INS1, W         
0171   390F           00542         ANDLW   0x0F
0172   00A5           00543         MOVWF   OFFSET
0173   2???           00544         CALL    readdata
                      00545         
0174   00A7           00546         MOVWF   DATATMP
                      00547         
0175   1BA1           00548         BTFSC   INS2, 7
0176   2???           00549         GOTO    L11b ; This is TSS
                      00550 
Warning[202]: Argument out of range.  Least significant bits used.
0177   1C27           00551         BTFSS   DATATMP, BB
0178   0AA3           00552         INCF    PC, F
0179   2???           00553         GOTO    LSTART  
                      00554 
017A                  00555 L11b
Warning[202]: Argument out of range.  Least significant bits used.
017A   1827           00556         BTFSC   DATATMP, BB
017B   0AA3           00557         INCF    PC, F
017C   2???           00558         GOTO    LSTART  
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00559 
017D                  00560 L12     ;Jump
017D   19A0           00561         BTFSC   INS1, 3
017E   2???           00562         GOTO    L12b ; This is Jump based on Rb
                      00563         
017F   0821           00564         MOVF    INS2, W
0180   00A3           00565         MOVWF   PC
0181   2???           00566         GOTO    LJMP
                      00567 
0182                  00568 L12b
                      00569         ; Grab A title, send it to SRAM
0182   0821           00570         MOVF    INS2, W         
0183   390F           00571         ANDLW   0x0F
0184   00A5           00572         MOVWF   OFFSET
0185   2???           00573         CALL    readdata
0186   00A3           00574         MOVWF   PC
0187   0EA3           00575         SWAPF   PC, F
0188   0AA5           00576         INCF    OFFSET, F
0189   2???           00577         CALL    readdata
018A   06A3           00578         XORWF   PC, F
018B   2???           00579         GOTO    LJMP
                      00580 
018C                  00581 L13     
                      00582         ;JSR
018C   0A23           00583         INCF    PC, W
018D   00A9           00584         MOVWF   TOS
                      00585         
018E   19A0           00586         BTFSC   INS1, 3
018F   2???           00587         GOTO    L13b ; This is JSR to Ra
                      00588 
                      00589         ; This is JSR to literal k
0190   0821           00590         MOVF    INS2, W
0191   00A3           00591         MOVWF   PC
0192   2???           00592         GOTO    LJMP
                      00593 
0193                  00594 L13b
0193   0821           00595         MOVF    INS2, W         
0194   390F           00596         ANDLW   0x0F
0195   00A5           00597         MOVWF   OFFSET
0196   2???           00598         CALL    readdata
0197   00A3           00599         MOVWF   PC
0198   0EA3           00600         SWAPF   PC, F
0199   0AA5           00601         INCF    OFFSET, F
019A   2???           00602         CALL    readdata
019B   06A3           00603         XORWF   PC, F
019C   2???           00604         GOTO    LJMP
                      00605 
019D                  00606 L14     
019D   0829           00607         MOVF    TOS, W
019E   00A3           00608         MOVWF   PC
019F   2???           00609         GOTO    LJMP
                      00610 
                      00611 
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00612         ORG 0x200       
0200                  00613 writedata:
0200   30A0           00614         movlw   0xA0
0201   0725           00615         addwf   OFFSET, W
0202   1683           00616         bsf             STATUS, RP0     ; Bank 1
0203   0084           00617         movwf   FSR
0204   1283           00618         bcf             STATUS, RP0     ; Bank 0
0205   0824           00619         movf    DATAWRITE, W
0206   1683           00620         bsf             STATUS, RP0     ; Bank 1
0207   0080           00621         MOVWF   INDF
0208   1283           00622         bcf     STATUS, RP0
0209   0008           00623         return
                      00624 
020A                  00625 readdata:
020A   30A0           00626         MOVLW   0xA0
020B   0725           00627         ADDWF   OFFSET, W
020C   1683           00628         BSF             STATUS, RP0     ; Bank 1
020D   0084           00629         MOVWF   FSR
020E   0800           00630         MOVF    INDF, W
020F   1283           00631         BCF             STATUS, RP0     ; Bank 0
0210   0008           00632         RETURN
                      00633 
0211                  00634 readins:
0211   1003           00635         BCF             STATUS, C
0212   0D23           00636         RLF             PC, W;
0213   1703           00637         BSF     STATUS, RP1 ;
0214   1283           00638         BCF     STATUS, RP0 ;Bank 2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0215   008D           00639         MOVWF   EEADR ;to read from
0216   1683           00640         BSF     STATUS, RP0 ;Bank 3
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0217   138C           00641         BCF     EECON1, EEPGD ;Point to Data memory
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0218   140C           00642         BSF     EECON1, RD ;Start read operation
0219   1283           00643         BCF     STATUS, RP0 ;Bank 2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
021A   080C           00644         MOVF    EEDATA, W ;
021B   1303           00645         BCF             STATUS, RP1
021C   00A0           00646         MOVWF   INS1
                      00647         
021D   1703           00648         BSF     STATUS, RP1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
021E   0A8D           00649         INCF    EEADR, F ;to read from
021F   1683           00650         BSF     STATUS, RP0 ;Bank 3
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0220   138C           00651         BCF     EECON1, EEPGD ;Point to Data memory
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0221   140C           00652         BSF     EECON1, RD ;Start read operation
0222   1283           00653         BCF     STATUS, RP0 ;Bank 2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0223   080C           00654         MOVF    EEDATA, W ;W = EEDATA
0224   1303           00655         BCF             STATUS, RP1
0225   00A1           00656         MOVWF   INS2
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0226   0008           00657         RETURN
Warning[205]: Found directive in column 1. (END)
3F72                  00658 END
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE 15


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADCS2                             00000006
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BB                                00000028
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRGH                              00000002
C                                 00000000
C1INV                             00000004
C1OUT                             00000006
C2INV                             00000005
C2OUT                             00000007
CASE0                             00000000
CASE1                             00000010
CASE10                            000000A0
CASE11                            000000B0
CASE12                            000000C0
CASE13                            000000D0
CASE14                            000000E0
CASE2                             00000020
CASE3                             00000030
CASE4                             00000040
CASE5                             00000050
CASE6                             00000060
CASE7                             00000070
CASE8                             00000080
CASE9                             00000090
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE 16


SYMBOL TABLE
  LABEL                             VALUE 

CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CIS                               00000003
CKE                               00000006
CKP                               00000004
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             0000009C
CMIE                              00000006
CMIF                              00000006
CREN                              00000004
CSRC                              00000007
CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            0000009D
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
D                                 00000005
DATATMP                           00000027
DATAWRITE                         00000024
DATA_ADDRESS                      00000005
DC                                00000001
D_A                               00000005
D_NOT_A                           00000005
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
F                                 00000001
FERR                              00000002
FSR                               00000004
GCEN                              00000007
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

GIE                               00000007
GO                                00000002
GO_DONE                           00000002
GO_NOT_DONE                       00000002
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INDF                              00000000
INS1                              00000020
INS2                              00000021
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
L0                                0000004D
L1                                0000004F
L10                               0000014B
L10b                              0000015A
L11                               0000016D
L11b                              0000017A
L12                               0000017D
L12b                              00000182
L13                               0000018C
L13b                              00000193
L14                               0000019D
L2                                0000006A
L3                                00000085
L4                                0000009E
L5                                000000B7
L6                                000000D0
L6R                               000000E6
L7                                000000FC
L8                                0000010F
L8b                               0000011D
L9                                00000129
L9b                               00000138
LJMP                              0000001D
LSTART                            0000001C
MYSTATUS                          00000022
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OBF                               00000006
OERR                              00000001
OFFSET                            00000025
OFFTMP                            00000026
OPTION_REG                        00000081
P                                 00000004
PC                                00000023
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RD0                               00000000
RD1                               00000001
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
READ_WRITE                        00000002
RP0                               00000005
RP1                               00000006
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SEN                               00000000
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOS                               00000029
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000088
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_BOREN_OFF                        00003FBF
_BOREN_ON                         00003FFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00001FFF
_CP_OFF                           00003FFF
_CP_ON                            00001FFF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_DEVID1                           00002006
_FOSC_EXTRC                       00003FFF
MPASM  5.49                         FINAL.ASM   5-12-2013  9:35:50         PAGE 22


SYMBOL TABLE
  LABEL                             VALUE 

_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_1FOURTH                      00003BFF
_WRT_256                          00003DFF
_WRT_HALF                         000039FF
_WRT_OFF                          00003FFF
_XT_OSC                           00003FFD
__16F877A                         00000001
__DEBUG                           1
readdata                          0000020A
readins                           00000211
start                             00000010
writedata                         00000200

Errors   :     0
Warnings :     7 reported,     0 suppressed
Messages :    18 reported,     0 suppressed

